<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ß‡∏±‡∏ô‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; text-align: center; max-width: 600px; margin: auto; }
    input, button { margin: 5px; padding: 8px; font-size: 16px; }
    .result { margin-top: 15px; font-weight: bold; color: blue; }
    .alert { color: red; font-weight: bold; }
    .optional { color: gray; font-size: 14px; }
    .info-box { text-align: left; background: #f9f9f9; padding: 15px; margin-top: 20px; border-left: 4px solid #ffcc00; }
    .lang-btn { font-size: 14px; padding: 5px 10px; cursor: pointer; }
    .footer { margin-top: 30px; font-size: 12px; color: gray; }
    .disclaimer { font-size: 12px; margin-top: 20px; color: red; font-weight: bold; }
    .date-container { display: flex; flex-direction: column; align-items: center; }
    .date-row { display: flex; justify-content: space-between; width: 100%; }
    .date-row label { text-align: left; flex: 1; }
    .date-row input { flex: 1; }
  </style>
</head>
<body>
  <button class="lang-btn" onclick="toggleLanguage()">üáπüá≠ TH / üá¨üáß EN</button>

  <h2 id="title">‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ß‡∏±‡∏ô‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</h2>
  <p id="instruction">‡∏Å‡∏£‡∏≠‡∏Å <b>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</b> (‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á ‚Üí ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î) ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á, ‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î 5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>

  <div class="date-container">
    <div class="date-row">
      <label id="date5-label" class="optional">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà #5 (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</label>
      <input type="date" id="date5">
    </div>
    <div class="date-row">
      <label id="date4-label" class="optional">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà #4 (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</label>
      <input type="date" id="date4">
    </div>
    <div class="date-row">
      <label id="date3-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà #3 (‡∏£‡∏≠‡∏á‡∏•‡∏á‡∏°‡∏≤):</label>
      <input type="date" id="date3" required>
    </div>
    <div class="date-row">
      <label id="date2-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà #2 (‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤):</label>
      <input type="date" id="date2" required>
    </div>
    <div class="date-row">
      <label id="date1-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà #1 (‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î):</label>
      <input type="date" id="date1" required>
    </div>
  </div>

  <button onclick="calculateNext()" id="calculate-btn">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ß‡∏±‡∏ô‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>

  <div class="result" id="result"></div>
  <div class="alert" id="alert"></div>

  <div class="info-box">
    <strong>‚ö†Ô∏è <span id="advice-title">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á:</span></strong>
    <ul>
      <li id="advice-1">‡∏´‡∏≤‡∏Å‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏™‡∏±‡πâ‡∏ô‡∏Å‡∏ß‡πà‡∏≤ 21 ‡∏ß‡∏±‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏≤‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô 35 ‡∏ß‡∏±‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</li>
      <li id="advice-2">‡∏´‡∏≤‡∏Å‡∏Ç‡∏≤‡∏î‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏≤‡∏ô‡∏Å‡∏ß‡πà‡∏≤ 90 ‡∏ß‡∏±‡∏ô ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô ‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏û‡∏ó‡∏¢‡πå</li>
      <li id="advice-3">‡∏´‡∏≤‡∏Å‡πÉ‡∏ä‡πâ <b>‡∏¢‡∏≤‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≥‡πÄ‡∏ô‡∏¥‡∏î/‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô</b> ‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô</li>
    </ul>
  </div>

  <div class="disclaimer" id="disclaimer">
    ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏ó‡∏¢‡πå
  </div>

  <div class="footer" id="footer">
    ‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÇ‡∏î‡∏¢ ‡∏ô‡∏û.‡∏ß‡∏¥‡∏ä‡∏ä‡∏≤‡∏Å‡∏£ ‡∏õ‡∏∏‡∏ì‡∏¢‡∏Å‡∏ô‡∏Å<br>
    ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î 27 ‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå ‡∏û.‡∏®. 2568<br>
    <a href="https://github.com/vk-poonyakanok/menstrual-cycle-predictor" target="_blank">GitHub</a>
  </div>

  <script>
    // Store all translations here
    const translations = {
      "th": {
        "title": "‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ß‡∏±‡∏ô‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô",
        "instruction": "‡∏Å‡∏£‡∏≠‡∏Å <b>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</b> (‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á ‚Üí ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î) ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á, ‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î 5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á",
        "date5-label": "‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà #5 (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):",
        "date4-label": "‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà #4 (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):",
        "date3-label": "‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà #3 (‡∏£‡∏≠‡∏á‡∏•‡∏á‡∏°‡∏≤):",
        "date2-label": "‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà #2 (‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤):",
        "date1-label": "‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà #1 (‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î):",
        "calculate-btn": "‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ß‡∏±‡∏ô‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ",
        "advice-title": "‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á:",
        "advice-1": "‡∏´‡∏≤‡∏Å‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏™‡∏±‡πâ‡∏ô‡∏Å‡∏ß‡πà‡∏≤ 21 ‡∏ß‡∏±‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏≤‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô 35 ‡∏ß‡∏±‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û",
        "advice-2": "‡∏´‡∏≤‡∏Å‡∏Ç‡∏≤‡∏î‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏≤‡∏ô‡∏Å‡∏ß‡πà‡∏≤ 90 ‡∏ß‡∏±‡∏ô ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô ‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏û‡∏ó‡∏¢‡πå",
        "advice-3": "‡∏´‡∏≤‡∏Å‡πÉ‡∏ä‡πâ ‡∏¢‡∏≤‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≥‡πÄ‡∏ô‡∏¥‡∏î/‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô ‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô",
        "disclaimer": "‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏ó‡∏¢‡πå",
        "footer": "‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÇ‡∏î‡∏¢ ‡∏ô‡∏û.‡∏ß‡∏¥‡∏ä‡∏ä‡∏≤‡∏Å‡∏£ ‡∏õ‡∏∏‡∏ì‡∏¢‡∏Å‡∏ô‡∏Å<br>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î 27 ‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå ‡∏û.‡∏®. 2568<br><a href='https://github.com/vk-poonyakanok/menstrual-cycle-predictor' target='_blank'>GitHub</a>"
      },
      "en": {
        "title": "Menstrual Cycle Predictor",
        "instruction": "Enter <b>date of onset</b> (oldest ‚Üí most recent), at least 3 dates, up to 5 dates",
        "date5-label": "Date #5 (if any):",
        "date4-label": "Date #4 (if any):",
        "date3-label": "Date #3 (older):",
        "date2-label": "Date #2 (previous):",
        "date1-label": "Date #1 (latest):",
        "calculate-btn": "Predict Next Period Date",
        "advice-title": "Caution:",
        "advice-1": "If the cycle is shorter than 21 days or longer than 35 days, or obviously irregular, it could be a sign of a health issue.",
        "advice-2": "If you miss your period for more than 90 consecutive days, please consult a doctor.",
        "advice-3": "If you're using birth control or hormones, your cycle might be unpredictable.",
        "disclaimer": "This document is only a knowledge tool and does not replace diagnosis or medical advice.",
        "footer": "Created by Vitchakorn Poonyakanok<br>Last updated: February 27, 2025<br><a href='https://github.com/vk-poonyakanok/menstrual-cycle-predictor' target='_blank'>GitHub</a>"
      }
    };

    function calculateNext() {
      // Reset alerts/results each time
      document.getElementById('alert').innerText = "";
      document.getElementById('result').innerText = "";

      // Get current language
      let currentLang = document.documentElement.lang;

      // Gather dates (ignoring empty fields)
      let rawDates = [
        document.getElementById('date5').value,
        document.getElementById('date4').value,
        document.getElementById('date3').value,
        document.getElementById('date2').value,
        document.getElementById('date1').value
      ].filter(Boolean);

      // Require at least 3 dates
      if (rawDates.length < 3) {
        let msgTH = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ß‡∏±‡∏ô (‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á ‚Üí ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)";
        let msgEN = "Please enter at least 3 dates (oldest ‚Üí most recent)";
        document.getElementById('result').innerText = (currentLang === "th") ? msgTH : msgEN;
        return;
      }

      // Convert to Date objects
      let dates = rawDates.map(d => new Date(d));

      // Ensure proper ordering (oldest ‚Üí newest)
      for (let i = 0; i < dates.length - 1; i++) {
        if (dates[i] > dates[i + 1]) {
          let warnTH = "‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á ‚Üí ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)";
          let warnEN = "‚ö†Ô∏è Please ensure dates are in correct order (oldest ‚Üí most recent)";
          document.getElementById('alert').innerText = (currentLang === "th") ? warnTH : warnEN;
          return;
        }
      }

      // Calculate cycle lengths (in days)
      let cycleLengths = [];
      for (let i = 0; i < dates.length - 1; i++) {
        let diff = (dates[i + 1] - dates[i]) / (1000 * 60 * 60 * 24);
        cycleLengths.push(diff);
      }

      // Find the median cycle length
      let sortedCycles = [...cycleLengths].sort((a, b) => a - b);
      let mid = Math.floor(sortedCycles.length / 2);
      let medianCycle = (sortedCycles.length % 2 === 1)
        ? sortedCycles[mid]
        : (sortedCycles[mid - 1] + sortedCycles[mid]) / 2;

      // Calculate variability: median of absolute differences from medianCycle
      let diffsFromMedian = cycleLengths.map(c => Math.abs(c - medianCycle));
      let sortedDiffs = diffsFromMedian.sort((a, b) => a - b);
      let midDiff = Math.floor(sortedDiffs.length / 2);
      let medianDiff = (sortedDiffs.length % 2 === 1)
        ? sortedDiffs[midDiff]
        : (sortedDiffs[midDiff - 1] + sortedDiffs[midDiff]) / 2;

      let isIrregular = medianDiff >= 9;

      // Predict the next period date (using the latest input date)
      let lastDate = dates[dates.length - 1];
      let predicted = new Date(lastDate);
      predicted.setDate(predicted.getDate() + medianCycle);

      // Format predicted date based on language:
      // Use the Buddhist calendar for Thai mode.
      let predictedDateTH = predicted.toLocaleDateString('th-TH-u-ca-buddhist', { 
        weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
      });
      let predictedDateEN = predicted.toLocaleDateString('en-US', { 
        weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
      });

      // Build result text
      let resultTH = `
        <b>‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ß‡∏±‡∏ô‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ:</b> ${predictedDateTH}<br>
        <b>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏ß‡∏±‡∏ô):</b> ${cycleLengths.join(", ")}<br>
        <b>‡∏Ñ‡πà‡∏≤‡∏Å‡∏•‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:</b> ${medianCycle.toFixed(1)} ‡∏ß‡∏±‡∏ô<br>
        <b>‡∏Ñ‡πà‡∏≤‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:</b> ${medianDiff.toFixed(1)} ‡∏ß‡∏±‡∏ô<br>
        ${isIrregular ? "‡∏£‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏à‡∏±‡∏î‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠ (Irregular)." 
                      : "‡∏£‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏à‡∏±‡∏î‡∏ß‡πà‡∏≤‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠ (Regular)."}
      `;
      let resultEN = `
        <b>Predicted next period date:</b> ${predictedDateEN}<br>
        <b>Cycle lengths (days):</b> ${cycleLengths.join(", ")}<br>
        <b>Median cycle length (days):</b> ${medianCycle.toFixed(1)}<br>
        <b>Median difference (variability):</b> ${medianDiff.toFixed(1)} days<br>
        ${isIrregular ? "The cycle is considered Irregular." 
                      : "The cycle is considered Regular."}
      `;

      // Display the result based on the current language
      document.getElementById('result').innerHTML = (currentLang === "th") ? resultTH : resultEN;
    }

    function toggleLanguage() {
      let lang = document.documentElement.lang === "th" ? "en" : "th";
      document.documentElement.lang = lang;

      // Update text elements from the translations object
      document.getElementById("title").innerHTML = translations[lang]["title"];
      document.getElementById("instruction").innerHTML = translations[lang]["instruction"];
      document.getElementById("date5-label").innerText = translations[lang]["date5-label"];
      document.getElementById("date4-label").innerText = translations[lang]["date4-label"];
      document.getElementById("date3-label").innerText = translations[lang]["date3-label"];
      document.getElementById("date2-label").innerText = translations[lang]["date2-label"];
      document.getElementById("date1-label").innerText = translations[lang]["date1-label"];
      document.getElementById("calculate-btn").innerText = translations[lang]["calculate-btn"];
      document.getElementById("advice-title").innerText = translations[lang]["advice-title"];
      document.getElementById("advice-1").innerText = translations[lang]["advice-1"];
      document.getElementById("advice-2").innerText = translations[lang]["advice-2"];
      document.getElementById("advice-3").innerText = translations[lang]["advice-3"];
      document.getElementById("disclaimer").innerText = translations[lang]["disclaimer"];
      document.getElementById("footer").innerHTML = translations[lang]["footer"];
    }
  </script>
</body>
</html>